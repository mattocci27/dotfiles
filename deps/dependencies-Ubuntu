#!/usr/bin/env bash
set -e

echo "Installing tools..."
sudo add-apt-repository ppa:neovim-ppa/unstable
sudo apt update -y
sudo apt install -y xsel \
  build-essential \
  neovim \
  peco \
  fzf \
  zsh \
  tmux \
  tree \
  make \
  curl \
  wget \
  cargo \
  neofetch \
  ripgrep \
  mosh \
  software-properties-common \
  libopenblas-dev \
  snapd \
  nodejs

# form tidyverse
sudo apt install -y \
  libxml2-dev \
  libcairo2-dev \
  libgit2-dev \
  default-libmysqlclient-dev \
  libpq-dev \
  libsasl2-dev \
  libsqlite3-dev \
  libssh2-1-dev \
  libxtst6 \
  libcurl4-openssl-dev \
  unixodbc-dev

# from verse
sudo apt install -y \
  cmake \
  curl \
  default-jdk \
  fonts-roboto \
  ghostscript \
  hugo \
  less \
  libbz2-dev \
  libglpk-dev \
  libgmp3-dev \
  libfribidi-dev \
  libharfbuzz-dev \
  libhunspell-dev \
  libicu-dev \
  liblzma-dev \
  libmagick++-dev \
  libopenmpi-dev \
  libpcre2-dev \
  libssl-dev \
  libv8-dev \
  libxml2-dev \
  libxslt1-dev \
  libzmq3-dev \
  lsb-release \
  qpdf \
  texinfo \
  software-properties-common \
  vim \
  wget

# from geosptail
sudo apt install -y \
  gdal-bin \
  lbzip2 \
  libfftw3-dev \
  libgdal-dev \
  libgeos-dev \
  libgsl0-dev \
  libgl1-mesa-dev \
  libglu1-mesa-dev \
  libhdf4-alt-dev \
  libhdf5-dev \
  libjq-dev \
  libpq-dev \
  libproj-dev \
  libprotobuf-dev \
  libnetcdf-dev \
  libsqlite3-dev \
  libssl-dev \
  libudunits2-dev \
  lsb-release \
  netcdf-bin \
  postgis \
  protobuf-compiler \
  sqlite3 \
  tk-dev \
  unixodbc-dev


# R
sudo apt install -y dirmngr \
  gnupg \
  apt-transport-https \
  ca-certificates \
  software-properties-common

sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9

sudo add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/'

sudo apt install -y r-base

echo "Installing python..."
sudo apt install -y \
  libpython3-dev \
  python3-dev \
  python3-pip \
  python3-venv \
  python3-virtualenv \
  docker-compose

echo "Installing docker..."
# docker
sudo apt-get install -y \
  apt-transport-https \
  ca-certificates \
  curl \
  gnupg \
  lsb-release

curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

echo \
  "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

sudo apt-get update -y
sudo apt-get install -y docker-ce docker-ce-cli containerd.io

sudo usermod -aG docker $USER

